@{
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<div class="right_cont">

    <div class="title_right"><strong>订单管理</strong></div>
    <div style="margin:auto">
        <strong>查询选项</strong>
        <table class="table table-bordered">

            <tr>
                <td align="right" bgcolor="#f1f1f1">车牌号：</td>
                <td><input type="text" name="input18" id="CarID" /></td>
                <td align="right" bgcolor="#f1f1f1">被保人姓名：</td>
                <td><input type="text" name="" id="PolicyName" /></td>
                <td align="right" bgcolor="#f1f1f1">订单状态：</td>
                <td><select id="ddlOrderState" name="select3">
    <option value="">全部</option>
    <option value="0">未确认</option>
    <option value="1">已订未支付</option>
    <option value="2">已支付</option>
</select></td>
            </tr>
            <tr>
                <td align="right" bgcolor="#f1f1f1">下单时间：</td>
                <td colspan="2"><input type="text" class="laydate-icon" id="BillCreateDate" value="" readonly /></td>
                <td align="right" bgcolor="#f1f1f1">订单编号：</td>
                <td colspan="2"><input type="text"  id="BillCode"  /></td>
            </tr>
        </table>
        <table class="margin-bottom-20 table  no-border">
            <tr>
                <td class="text-center"><input type="button" value="查询" class="btn btn-info " style="width:80px;" onclick="submit(1,1)" /></td>
            </tr>
        </table>
        <div id="recordlist"></div>
        <div class="pages">
            <div id="Pagination"></div>
            <div class="searchPage">
                <span class="page-sum">共<strong class="allPage" id="SumPages"></strong>页</span>
                <span class="page-go">跳转<input type="text" id="anypageindex">页</span>
                <a href="javascript:;" class="page-btn" id="goanypage">GO</a>
            </div>
        </div>
    </div>

</div>
<script>
    jeDate({
        dateCell: '#BillCreateDate',
        format: "YYYY-MM-DD",
        minDate: "1900-01-01", //0代表今天，-1代表昨天，-2代表前天，以此类推
        maxDate: jeDate.now(0) //1代表明天，2代表后天，以此类推
    });
    var pageindex = 1;
    $(function () {
        submit(1, 1);
        $("#goanypage").click(function () {
            var thispage = parseInt($("#anypageindex").val());
            submit(thispage, null);
        });
    });
    function submit(page,check)
    {

        if (page == "99999")
        {
            page = pageindex + 1;
        }
        else if (page == "0")
        {
            page = pageindex - 1;
        }
        else
        {
            pageindex = page;
        }
        var CarID = $("#CarID").val();
        var PolicyName = $("#PolicyName").val();
        var ddlOrderState = $("#ddlOrderState").val();
        var BillCreateDate = $("#BillCreateDate").val();
        var BillCode = $("#BillCode").val();
        if (check != null) {
            $.get("GetBillListCount", { CarID: CarID, PolicyName: PolicyName, BillCreateDate: BillCreateDate, ddlOrderState: ddlOrderState, BillCode: BillCode }, function (data) {
                var sumcount = parseInt(data);
                $("#SumPages").html(sumcount);
                $("#Pagination").pagination(sumcount);
            });
            }
        $("#recordlist").load("BillListTable", { page: page, CarID: CarID, PolicyName: PolicyName, BillCreateDate: BillCreateDate, ddlOrderState: ddlOrderState, BillCode: BillCode }, function () {
        });
    }
</script>